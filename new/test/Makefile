CC = gcc
CXX = g++
CFLAGS = -c -ggdb -I../include -I/usr/local/include
CXXFLAGS = $(CFLAGS)
LDFLAGS = -L../kernel -L/usr/local/lib -lboost_thread

smp:smp.o ../kernel/spinlock.o ../kernel/semaphore.o
	$(CXX) $(LDFLAGS) $^ -o $@

%.o:%.c
	$(CC) $(CFLAGS) $< -o $@

%.o:%.cc
	$(CXX) $(CXXFLAGS) $< -o $@


#File dependencies generated by GCC automatically
smp.o: smp.cc ../include/asm/spinlock.h ../include/asm/rwlock.h \
	 ../include/asm/atomic.h

spinlock.o: ../kernel/spinlock.c ../include/asm/spinlock.h \
	 ../include/asm/rwlock.h ../include/asm/atomic.h

semaphore.o: ../kernel/semaphore.c ../include/asm/atomic.h

