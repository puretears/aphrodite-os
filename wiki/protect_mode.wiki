#

= How to construct a GDT entry =
In "protect.inc", there are several macros used for constructing a GDT entry.

== Construct a segment descriptor ==

We can divide a segment descriptor into three parts: _base address_, _segment limit_ and _attribute_. _Attribute_ includes: _G_, _D/B_, _AVL_, _L_, _P_, _DPL_, _S_ and _type_ flags. We treated those flags into a whole word.

e.g. 

 * Set G flag: 8000H
 * set D/B flag: 4000H

and so on. 
 
{{{
; para1: base address
; para2: limit
; para3: attribute
%macro GDT_DESCRIPTOR 3
    dw %2 & 0FFFFH
    dw %1 & 0FFFFH
    db (%1 >> 16) & 0FFH
    dw ((%2 >> 8) & 0F00H) | (%3 & 0F0FFH)
    db (%1 >> 24) & 0FFH
%endmacro                  
}}}